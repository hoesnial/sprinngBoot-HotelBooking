<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Fragment: Navbar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top" th:fragment="navbar">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" th:href="@{/}">
      <i class="fas fa-hotel me-2"></i>
      <span>Hotel Heaven</span>
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link active" th:href="@{/}">Beranda</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#facilities">Fasilitas</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#contact">Kontak</a>
        </li>
      </ul>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item" sec:authorize="isAnonymous()">
          <a class="nav-link" th:href="@{/login}">
            <i class="fas fa-sign-in-alt me-1"></i> Login
          </a>
        </li>
        <li class="nav-item dropdown" sec:authorize="isAnonymous()">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            id="registerDropdown"
            role="button"
            data-bs-toggle="dropdown"
          >
            <i class="fas fa-user-plus me-1"></i> Daftar
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <a class="dropdown-item" th:href="@{/register/customer}">
                <i class="fas fa-user me-2"></i>Pelanggan
              </a>
            </li>
            <li>
              <a class="dropdown-item" th:href="@{/register/manager}">
                <i class="fas fa-user-tie me-2"></i>Manager
              </a>
            </li>
          </ul>
        </li>
        <!-- Jika sudah login, tampilkan menu sesuai role -->
        <li class="nav-item dropdown" sec:authorize="isAuthenticated()">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            id="userDropdown"
            role="button"
            data-bs-toggle="dropdown"
          >
            <i class="fas fa-user-circle me-1"></i> Akun
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li sec:authorize="hasRole('ROLE_ADMIN')">
              <a class="dropdown-item" th:href="@{/admin/dashboard}">
                <i class="fas fa-tachometer-alt me-2"></i>Dashboard Admin
              </a>
            </li>
            <li sec:authorize="hasRole('ROLE_CUSTOMER')">
              <a class="dropdown-item" th:href="@{/search}">
                <i class="fas fa-search me-2"></i>Cari Hotel
              </a>
            </li>
            <li sec:authorize="hasRole('ROLE_CUSTOMER')">
              <a class="dropdown-item" th:href="@{/customer/bookings}">
                <i class="fas fa-book me-2"></i>Booking Saya
              </a>
            </li>
            <li sec:authorize="hasRole('ROLE_CUSTOMER')">
              <a class="dropdown-item" th:href="@{/customer/account}">
                <i class="fas fa-user me-2"></i>Akun Saya
              </a>
            </li>
            <li sec:authorize="hasRole('ROLE_HOTEL_MANAGER')">
              <a class="dropdown-item" th:href="@{/manager/dashboard}">
                <i class="fas fa-tachometer-alt me-2"></i>Dashboard Manager
              </a>
            </li>
            <li sec:authorize="hasRole('ROLE_HOTEL_MANAGER')">
              <a class="dropdown-item" th:href="@{/manager/account}">
                <i class="fas fa-user-tie me-2"></i>Akun Manager
              </a>
            </li>
            <li>
              <form method="post" th:action="@{/logout}">
                <button class="dropdown-item" type="submit">
                  <i class="fas fa-sign-out-alt me-2"></i>Logout
                </button>
              </form>
            </li>
          </ul>
        </li>
        <li class="nav-item" sec:authorize="isAuthenticated()">
          <div class="d-flex justify-content-end">
            <form class="form-inline" method="post" th:action="@{/logout}">
              <button class="btn btn-link nav-link" type="submit"><i class="bi bi-box-arrow-right"></i> Logout</button>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
</body>
</html>